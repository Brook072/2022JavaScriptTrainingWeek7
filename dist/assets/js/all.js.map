{"version":3,"sources":["all.js"],"names":["itineraryData","lastDataItem","addData","showData","areaSelected","areaDistribution","formUnfinished","dataArea","itineraryAddBtn","document","querySelector","showDataAreaSelect","apiPath","addForm","forms","elements","axios","get","then","res","data","chartDataFilter","itineraryCardGenerate","err","console","log","addEventListener","e","preventDefault","formInputValidation","target","value","showDataFilter","forEach","areaListed","count","item","area","push","c3","generate","bindto","columns","type","donut","label","show","title","width","size","height","filter","cardWrapper","resultNumber","innerHTML","length","i","imgUrl","rate","name","description","group","price","querySelectorAll","remove","finishedNum","tagName","parentNode","labels","innerText","addNewData","id","getElementById","parseInt","reset"],"mappings":"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","file":"all.js","sourcesContent":["// let itineraryData = [\n//   {\n//     \"id\": 0,\n//     \"name\": \"肥宅心碎賞櫻3日\",\n//     \"imgUrl\": \"https://images.unsplash.com/photo-1522383225653-ed111181a951?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1655&q=80\",\n//     \"area\": \"高雄\",\n//     \"description\": \"賞櫻花最佳去處。肥宅不得不去的超讚景點！\",\n//     \"group\": 87,\n//     \"price\": 1400,\n//     \"rate\": 10\n//   },\n//   {\n//     \"id\": 1,\n//     \"name\": \"貓空纜車雙程票\",\n//     \"imgUrl\": \"https://images.unsplash.com/photo-1501393152198-34b240415948?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80\",\n//     \"area\": \"台北\",\n//     \"description\": \"乘坐以透明強化玻璃為地板的「貓纜之眼」水晶車廂，享受騰雲駕霧遨遊天際之感\",\n//     \"group\": 99,\n//     \"price\": 240,\n//     \"rate\": 2\n//   },\n//   {\n//     \"id\": 2,\n//     \"name\": \"台中谷關溫泉會1日\",\n//     \"imgUrl\": \"https://images.unsplash.com/photo-1535530992830-e25d07cfa780?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80\",\n//     \"area\": \"台中\",\n//     \"description\": \"全館客房均提供谷關無色無味之優質碳酸原湯，並取用八仙山之山冷泉供蒞臨貴賓沐浴及飲水使用。\",\n//     \"group\": 20,\n//     \"price\": 1765,\n//     \"rate\": 7\n//   }\n// ];\n\nlet itineraryData, lastDataItem\nlet addData = {};\nlet showData = [];\nlet areaSelected\nlet areaDistribution = [];\nlet formUnfinished = false;\nconst dataArea = [\"台北\",\"新北\",\"桃園\",\"台中\",\"台南\",\"高雄\",\"基隆\",\"新竹\",\"嘉義\",\"苗栗\",\"彰化\",\"南投\",\"雲林\",\"屏東\",\"宜蘭\",\"花蓮\",\"台東\",\"澎湖\"];\nconst itineraryAddBtn = document.querySelector('.itineraryAddBtn')\nconst showDataAreaSelect = document.querySelector('.areaSelect')\nconst apiPath = 'https://raw.githubusercontent.com/hexschool/js-training/main'\nconst addForm = document.forms['addItineraryForm'].elements;\n\naxios.get(`${apiPath}/travelApi.json`).then((res)=>{\n  itineraryData = res.data.data\n  showData = itineraryData;\n  chartDataFilter();\n  itineraryCardGenerate();\n}).catch((err)=>{\n  console.log(err)\n})\n\nitineraryAddBtn.addEventListener('click', function(e){\n  e.preventDefault();\n  formInputValidation();\n})\n\nshowDataAreaSelect.addEventListener('change', function(e){\n  areaSelected = e.target.value;\n  showDataFilter();\n  chartDataFilter();\n  if(areaSelected === '') showData = itineraryData;\n  itineraryCardGenerate();\n})\n\nfunction chartDataFilter(){\n  areaDistribution = []\n  dataArea.forEach((areaListed)=>{\n    let count = 0\n    showData.forEach((item)=>{\n      if(item.area == areaListed) count += 1\n    })\n    if(count != 0) areaDistribution.push([areaListed , count]);\n  })\n  c3.generate({\n    bindto: '#areaDistribution',\n    data: {\n      columns: areaDistribution,\n      type: 'donut'\n    },\n    donut: {\n      label: {\n        show: false\n      },\n      title: '套票地區比例',\n      width: 10\n    },\n    size:{\n      height: 184,\n    }\n  })\n}\n\nfunction showDataFilter(){\n  showData = itineraryData.filter((item)=>{\n    if(item.area === areaSelected) return true\n  })\n}\n\nfunction itineraryCardGenerate(){\n  const cardWrapper = document.querySelector('.itineraryCardWrapper')\n  const resultNumber = document.querySelector('.resultNumber')\n  if(cardWrapper.innerHTML != '') cardWrapper.innerHTML = ''\n  resultNumber.innerHTML = `本次搜尋共 ${showData.length} 筆資料`\n  showData.forEach(function(i){\n    cardWrapper.innerHTML += `\n      <div class='w-full md:w-6/12 xl:w-4/12 px-3.75'>\n        <div class=\"relative shadow-md rounded\">\n          <span class=\"absolute -top-2.5 bg-seaSerpent text-xl text-white leading-6 rounded-r py-2 px-5\">${i.area}</span>\n          <div>\n              <img src=\"${i.imgUrl}\" alt=\"\" class=\"w-full h-full md:h-45 object-cover rounded-t\">\n          </div>\n          <div class=\"relative px-5 pt-5 pb-3.5\">\n              <span class=\"absolute -top-4 left-0 bg-primary text-white leading-6 rounded-r py-1 px-2\">${i.rate}</span>\n              <h3 class=\"text-primary text-2xl font-medium pb-1 mb-4 border-b border-b-2 border-b-primary\">${i.name}</h3>\n              <div class='h-36'>\n                <p class=\"text-tertiary text-base leading-6 mb-6\">${i.description}</p>\n              </div>\n              <div class=\"flex justify-between items-center\">\n                  <div>\n                      <span class=\"mdi mdi-alert-circle text-primary text-base font-medium mr-1\"></span>\n                      <span class=\"text-primary text-base font-medium\">剩下最後${i.group}組</span>\n                  </div>\n                  <div class=\"flex items-center\">\n                      <span class=\"text-primary text-base mr-1\">TWD</span>\n                      <span class=\"text-primary text-4xl font-medium\">$${i.price}</span>\n                  </div>\n              </div>\n          </div>\n        </div>\n      </div>\n      `\n  })\n}\n\nfunction formInputValidation(){\n  if(document.querySelectorAll('.alertText')){\n    document.querySelectorAll('.alertText').forEach((item)=>{\n      item.remove();\n    })\n  };\n  let finishedNum = 0;\n  for(let i = 0; i<addForm.length; i+=1){\n    if(addForm[i].value ==''){\n      if(addForm[i].tagName == 'SELECT'){\n        addForm[i].parentNode.innerHTML += `<span class=\"alertText text-red\">請選擇${addForm[i].labels[0].innerText}!</span>`\n      }else{\n        addForm[i].parentNode.innerHTML += `<span class=\"alertText text-red\">請輸入${addForm[i].labels[0].innerText}!</span>`\n      }\n    }else{\n      finishedNum += 1;\n    }\n  }\n  if(finishedNum == 7) addNewData();\n}\n\nfunction addNewData(){\n  lastDataItem = itineraryData[itineraryData.length-1]\n  addData = {\n    'id': lastDataItem.id += 1,\n    \"name\": document.getElementById('name').value,\n    \"imgUrl\": document.getElementById('imgUrl').value,\n    \"area\": document.getElementById('area').value,\n    \"description\": document.getElementById('description').value,\n    \"group\": parseInt(document.getElementById('group').value),\n    \"price\": parseInt(document.getElementById('price').value),\n    \"rate\": parseInt(document.getElementById('rate').value)\n  }\n  itineraryData.push(addData);\n  document.getElementById('addItineraryForm').reset();\n  chartDataFilter();\n  itineraryCardGenerate();\n}"]}